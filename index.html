<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Lodash Discovery</title>
</head>
<body>
  <ul id='vehicleList'>
  	<li class='cars'>2012 Audi</li>
  	<li class='cars'>2008 Mercedes</li>
  	<li class='cars'>2014 BMW</li>
  </ul>
</body>
<script>

// ---------- _.each ---------- //

const carModels = [];
const cars = document.getElementsByTagName('li');

// iterate over elements in a collection and invoke iteratee for each element (DOM nodes in this case)
for (let car of cars) {
  const carElements = car.outerText;
  const carDigits = carElements.split('', 4);
  const carYears = carDigits.join('');
  const carYearsAsIntegers = parseInt(carYears);
  carModels.push(carYearsAsIntegers);
  // immediately invoke function for each iteratee
  // setTimeout(function() {
  //   console.log(carModels.shift([0]).toUpperCase());
  // }, 1000);
}


// ---------- _.map ---------- //

// create an array of values by running each element in collection thru iteratee, then return new array
function getAnnualMileage(model, index, carModels) {
  const currentYear = new Date().getFullYear();
  const carYearDifference = currentYear - model;
  return carYearDifference * this.average;
};

// set value of 'this' object to pass to getAnnualMileage()
const modelYears = carModels.map(getAnnualMileage, {
  average: 12000
});


// ---------- _.reduce ---------- //

// Reduce collection to a value which is the accumulated result of running each element in collection thru iteratee, 
// where each successive invocation is supplied the return value of the previous. 
const mileageSum = modelYears.reduce((accumulator, initialValue, index, modelYear) => {
  return accumulator + initialValue;
}, 0);

</script>
</html>